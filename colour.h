/*Colour strings for ANSI compatible terminals.*/

#define C_NORMAL  "\033[00m"
#define BG_NORMAL  "\043[00m"
#define C_DARK_RED  "\033[00;31m"
#define C_RED "\033[01;31m"
#define C_DARK_GREEN  "\033[00;32m"
#define C_GREEN  "\033[01;32m"
#define C_YELLOW  "\033[01;33m"
#define C_DARK_YELLOW  "\033[00;33m"
#define C_DARK_BLUE  "\033[00;34m"
#define C_BLUE  "\033[01;34m"
#define C_PURPLE  "\033[00;35m"
#define C_MAGENTA  "\033[01;35m"
#define C_DARK_CYAN  "\033[00;36m"
#define C_CYAN  "\033[01;36m"
#define C_GREY  "\033[00;37m"
#define C_WHITE  "\033[01;37m"

#define C_REV_RED "\033[01;41m"

#define C_ITALIC "\x1B[3m"
#define C_STANDARD "\x1B[23m"

const char *heat_colour_range[] = {
  "\033[38;5;17m",
  "\033[38;5;17m",
  "\033[38;5;18m",
  "\033[38;5;18m",
  "\033[38;5;19m",
  "\033[38;5;19m",
  "\033[38;5;57m",
  "\033[38;5;56m",
  "\033[38;5;55m",
  "\033[38;5;54m",
  "\033[38;5;53m",
  "\033[38;5;52m",
  "\033[38;5;90m",
  "\033[38;5;89m",
  "\033[38;5;88m",
  "\033[38;5;160m",
  "\033[38;5;196m",
  "\033[38;5;202m",
  "\033[38;5;208m",
  "\033[38;5;214m",
  "\033[38;5;220m",
  "\033[38;5;226m",
  "\033[38;5;190m",
  "\033[38;5;154m",
  "\033[38;5;118m",
  "\033[38;5;82m",
  "\033[38;5;46m",
  "\033[38;5;48m",
  "\033[38;5;49m",
  "\033[38;5;51m"
};

const char *heat_colour_range_rev[] = {
  "\033[38;5;88m\033[48;5;17m",
  "\033[38;5;89m\033[48;5;17m",
  "\033[38;5;82m\033[48;5;18m",
  "\033[38;5;81m\033[48;5;18m",
  "\033[38;5;16m\033[48;5;19m",
  "\033[38;5;16m\033[48;5;19m",
  "\033[38;5;16m\033[48;5;57m",
  "\033[38;5;16m\033[48;5;56m",
  "\033[38;5;16m\033[48;5;55m",
  "\033[38;5;16m\033[48;5;54m",
  "\033[38;5;16m\033[48;5;53m",
  "\033[38;5;16m\033[48;5;52m",
  "\033[38;5;16m\033[48;5;90m",
  "\033[38;5;16m\033[48;5;89m",
  "\033[38;5;16m\033[48;5;88m",
  "\033[38;5;16m\033[48;5;160m",
  "\033[38;5;16m\033[48;5;196m",
  "\033[38;5;16m\033[48;5;202m",
  "\033[38;5;16m\033[48;5;208m",
  "\033[38;5;16m\033[48;5;214m",
  "\033[38;5;16m\033[48;5;220m",
  "\033[38;5;16m\033[48;5;226m",
  "\033[38;5;16m\033[48;5;190m",
  "\033[38;5;16m\033[48;5;154m",
  "\033[38;5;16m\033[48;5;118m",
  "\033[38;5;16m\033[48;5;82m",
  "\033[38;5;16m\033[48;5;46m",
  "\033[38;5;16m\033[48;5;48m",
  "\033[38;5;16m\033[48;5;49m",
  "\033[38;5;16m\033[48;5;51m"
};

static inline const char * colourise_float01(float f, bool rev)
{
  const char **array;
  uint len;
  if (rev) {
    len = ARRAY_LEN(heat_colour_range_rev);
    array = heat_colour_range_rev;
  } else {
    len = ARRAY_LEN(heat_colour_range);
    array = heat_colour_range;
  }
  if ( f < 0) {
    f = 0;
  } else if (f >= 1) {
    f = 0.999f;
  }
  uint i = MIN(f * len, len - 1);
  return array[i];
}
