#!/usr/bin/python
import os, sys
import random
from gtkdisplay import run
from classify import GTKClassifier, gst_init
from classify import KIWI_MFCCS as MFCCS
from classify import KIWI_CLASSES as CLASSES
from classify import KIWI_HIDDEN_SIZE as HIDDEN_SIZE
TEST_AUDIO_DIR = "/home/douglas/corpora/kiwi/test/"

def main():
    gst_init()
    classifier = GTKClassifier(mfccs=MFCCS,
                               classes=CLASSES,
                               hsize=HIDDEN_SIZE,
                               sinkname='autoaudiosink')

    d = TEST_AUDIO_DIR
    files = [os.path.join(d, x) for x in os.listdir(d)
             if x.endswith('.wav') and x[0] in classifier.classes[:2]]

    random.shuffle(files)
    run(classifier, files)


main()
